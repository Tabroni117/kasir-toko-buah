<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TOKO BUAH INDONESIA ‚Äì Aplikasi Kasir</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to bottom right, #e6fff5, #f7fff9);
      margin: 0;
      padding: 0 0 80px 0; /* space for bottom nav */
    }
    .running-text {
      background: linear-gradient(to right, #d0f0c0, #e0f7da);
      color: #2e7d32;
      font-weight: bold;
      font-size: 16px;
      padding: 6px;
      text-align: center;
    }
    .running-text span {
      display: inline-block;
      padding-left: 100%;
      animation: marquee 10s linear infinite;
    }
    @keyframes marquee {
      0% { transform: translate(0, 0); }
      100% { transform: translate(-100%, 0); }
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #43a047;
      color: white;
      padding: 16px 20px;
      border-radius: 12px;
      margin: 10px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .logo-container {
      display: flex;
      align-items: center;
    }
    .logo-container img {
      height: 50px;
      margin-right: 15px;
      border-radius: 50%;
      border: 2px solid white;
    }
    h1 {
      font-size: 20px;
      margin: 0;
    }
    .login-btn {
      background: white;
      color: #43a047;
      border: none;
      padding: 10px 16px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .form-section {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 10px;
      margin: 16px;
    }
    form, .tombol-aksi {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      flex: 1 1 48%;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 14px;
      background-color: #f9f9f9;
    }
    button {
      background: #4CAF50;
      color: white;
      padding: 12px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      width: 100%;
      margin-top: 10px;
    }
    table {
      width: calc(100% - 32px);
      margin: 0 auto 20px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      border-collapse: collapse;
    }
    th, td {
      padding: 12px;
      border-bottom: 1px solid #eee;
      text-align: left;
    }
    th {
      background: #e8f5e9;
      color: #2e7d32;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }
    .modal-content {
      background: white;
      margin: 10% auto;
      padding: 25px;
      border-radius: 12px;
      max-width: 400px;
      text-align: center;
    }
    .bottom-nav {
      position: fixed;
      bottom: 0;
      width: 100%;
      background: white;
      border-top: 1px solid #ccc;
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px 0;
      box-shadow: 0 -2px 8px rgba(0,0,0,0.05);
    }
    .bottom-nav button {
      background: none;
      border: none;
      font-size: 20px;
      color: #4CAF50;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .bottom-nav span {
      font-size: 12px;
    }
  </style>
</head>
<body>
  <div class="running-text"><span>RUJAK BUAH INDONESIA</span></div>  <header>
    <div class="logo-container">
      <img src="rujak-logo.png" alt="Logo">
      <h1>TOKO BUAH INDONESIA</h1>
    </div>
    <button class="login-btn" onclick="window.location.href='login.html'">üîê Login</button>
  </header>  <div class="form-section">
    <form id="form">
      <label>Pilih Buah<select id="nama"></select></label>
      <label>Harga Satuan (Rp)<input type="number" id="harga" readonly></label>
      <label>Jumlah<input type="number" id="jumlah"></label>
      <button type="button" onclick="tambahItem()">+ Tambah ke Keranjang</button>
    </form>
    <div class="tombol-aksi">
      <button onclick="simpanTransaksi()">üíæ Simpan Transaksi</button>
      <button onclick="hapusSemua()">üóëÔ∏è Hapus Semua</button>
      <button onclick="resetForm()">üîÑ Reset Form</button>
      <button onclick="showQrisModal()">üßæ Cetak Struk</button>
      <button onclick="window.location.reload()">üîÉ Refresh Halaman</button>
      <button onclick="window.location.href='dashboard.html'">üìä Dashboard</button>
    </div>
  </div>  <h3 style="margin-left:16px">üõí Daftar Belanja</h3>
  <table>
    <thead>
      <tr><th>Nama Buah</th><th>Harga Satuan</th><th>Jumlah</th><th>Subtotal</th></tr>
    </thead>
    <tbody id="tabelBelanja"></tbody>
    <tfoot><tr><td colspan="3">Total</td><td id="totalBelanja">Rp 0</td></tr></tfoot>
  </table>  <div id="qrisModal" class="modal">
    <div class="modal-content">
      <h3>Scan QRIS untuk Bayar</h3>
      <img src="qris.png" alt="QRIS" style="max-width:100%;">
      <br>
      <button onclick="cetakStruk()">‚úÖ Lanjut Cetak</button>
      <button onclick="closeQrisModal()">Tutup</button>
    </div>
  </div>  <div class="bottom-nav">
    <button onclick="window.location.href='index.html'"><div>üè†<br><span>Beranda</span></div></button>
    <button onclick="window.location.href='dashboard.html'"><div>üì¶<br><span>Stok</span></div></button>
    <button onclick="window.scrollTo(0, 0)"><div>üîù<br><span>Atas</span></div></button>
  </div>  <script>
    const firebaseConfig = { /* ... isi config Firebase seperti sebelumnya ... */ };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    let buahData = [], keranjang = [];
    const selectNama = document.getElementById("nama"), inputHarga = document.getElementById("harga");

    db.collection("buah").get().then(snapshot => {
      snapshot.forEach(doc => {
        const data = doc.data(); buahData.push(data);
        const option = document.createElement("option");
        option.value = data.nama; option.textContent = data.nama;
        selectNama.appendChild(option);
      });
    });

    selectNama.addEventListener("change", () => {
      const selected = buahData.find(b => b.nama === selectNama.value);
      inputHarga.value = selected ? selected.harga : '';
    });

    function tambahItem() {
      const nama = selectNama.value, harga = parseInt(inputHarga.value), jumlah = parseInt(document.getElementById("jumlah").value);
      if (!nama || isNaN(harga) || isNaN(jumlah) || jumlah <= 0) return alert("Mohon isi data dengan benar.");
      keranjang.push({ nama, harga, jumlah }); updateTabel();
    }

    function updateTabel() {
      const tabel = document.getElementById("tabelBelanja");
      tabel.innerHTML = "";
      let total = 0;
      keranjang.forEach(item => {
        const subtotal = item.harga * item.jumlah;
        total += subtotal;
        tabel.innerHTML += `<tr><td>${item.nama}</td><td>Rp ${item.harga.toLocaleString()}</td><td>${item.jumlah}</td><td>Rp ${subtotal.toLocaleString()}</td></tr>`;
      });
      document.getElementById("totalBelanja").textContent = "Rp " + total.toLocaleString();
    }

    function simpanTransaksi() {
      if (keranjang.length === 0) return alert("Keranjang kosong.");
      db.collection("transaksi").add({
        tanggal: new Date(),
        item: keranjang,
        total: keranjang.reduce((sum, i) => sum + i.harga * i.jumlah, 0)
      }).then(() => alert("Transaksi disimpan!"));
    }

    function hapusSemua() { if (confirm("Hapus semua item?")) { keranjang = []; updateTabel(); } }
    function resetForm() { document.getElementById("form").reset(); inputHarga.value = ""; }
    function showQrisModal() { document.getElementById("qrisModal").style.display = "block"; }
    function closeQrisModal() { document.getElementById("qrisModal").style.display = "none"; }
    function cetakStruk() {
      closeQrisModal();
      let struk = "=== TOKO BUAH INDONESIA ===\n", total = 0;
      keranjang.forEach(i => {
        const subtotal = i.harga * i.jumlah;
        total += subtotal;
        struk += `${i.nama} (${i.jumlah} x Rp ${i.harga.toLocaleString()}) = Rp ${subtotal.toLocaleString()}\n`;
      });
      struk += `----------------------------\nTOTAL: Rp ${total.toLocaleString()}\nTerima kasih!`;
      alert(struk);
    }
  </script></body>
</html>
